<!DOCTYPE html>
<html>
  <head>
    <!-- update the version number as needed -->
    <script src="/__/firebase/8.2.1/firebase-app.js"></script>
    <script src="/__/firebase/8.2.1/firebase-analytics.js"></script>
    <script src="/__/firebase/8.2.1/firebase-auth.js"></script>
    <script src="/__/firebase/8.2.1/firebase-firestore.js"></script>
    <script src='/__/firebase/init.js'></script>
    
    <script src='https://code.jquery.com/jquery-3.5.1.min.js' integrity='sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=' crossorigin='anonymous'></script>
    <style>
      body {
        font-family:Arial, Helvetica, sans-serif;
        margin: 3em;
        line-height: 1.5em;
      }
      ol {
        margin: 2em 0;
        padding: 1em;
      }
    </style>
  </head>
  <body>

    <h1>Feeling Seen, Being Watched</h1>
    <ol>
      <li>Lauren: <i>Welcome. I am happy to have this time with you...</i></li>
      <li>Lauren: <i>We will start by moving into breakout rooms. Once you are there, a facilitator will guide you in sharing your names and locations to get acquainted.</i></li>
      <li>Lauren: <i>Then I will rejoin you to guide you through this activity together.</i></li>
      <li><b>Facilitators: Click on breakout room link below.</b></li>
    </ol> 

    <div id='rooms'>
    </div>

<script>
let app = firebase.app();
firebase.auth().signInAnonymously().catch(function(error) { console.log(error); });
firebase.auth().onAuthStateChanged(function(user) { });
db = firebase.firestore(app);

let rooms = [];

db.collection('people')
  .get()
  .then(function(snapshot) {
    snapshot.forEach(function(doc) {
      console.log(doc.id, " => ", doc.data());
      let name = doc.data().room;
      if (!rooms.includes(name)) {
        $('#rooms').append('<a href="room.html?id='+name+'">'+name+'</a><br>');
        rooms.push(name);
      }
    });
  });
</script>
    
  </body>
</html>