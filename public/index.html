<!DOCTYPE html>
<html>
  <head>
    <!-- update the version number as needed -->
    <script src="/__/firebase/8.2.1/firebase-app.js"></script>
    <script src="/__/firebase/8.2.1/firebase-analytics.js"></script>
    <script src="/__/firebase/8.2.1/firebase-auth.js"></script>
    <script src="/__/firebase/8.2.1/firebase-firestore.js"></script>
    <script src='/__/firebase/init.js'></script>
    
    <script src='https://code.jquery.com/jquery-3.5.1.min.js' integrity='sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=' crossorigin='anonymous'></script>
    <style>
      body {
        font-family:Arial, Helvetica, sans-serif;
        margin: 2em;
      }
      h1 {
        font-size: 1.0em;
        margin-top: 2em;
      }
      .room {
        max-width: 60em;
      }
      img {
        width: 1.2em;
        float: right;
        padding-right: 0.25vw;
      }
      span {
        display: inline-block;
        margin-bottom: 0.5em;
        padding: 0.5em;
        cursor: pointer;
      }
      span:hover {
        background: #a4cbff;
      }
      span:active {
        background: #90c0ff;
      }    
      .instruct {
        background: #d7e8ff;
        width: calc(100% - 6em);
      }
      .copied {
        display: none;
        margin: 0;
      }
    </style>
  </head>
  <body>

    <div id='rooms'>
      <p>Click on your breakout room</p>
    </div>


    <p>Wait for the cue from Lauren.<br>
      Click each name to copy to clipboard the message for that person.<br>
      Locate that person in the zoom chat.<br>
      Paste the clipboard message into a private message to them.</p>    

<script>
let app = firebase.app();
firebase.auth().signInAnonymously().catch(function(error) { console.log(error); });
firebase.auth().onAuthStateChanged(function(user) { });
db = firebase.firestore(app);

let rooms = [];

db.collection('people')
  .get()
  .then(function(snapshot) {
    snapshot.forEach(function(doc) {
      console.log(doc.id, " => ", doc.data());
      let name = doc.data().room;
      if (!rooms.includes(name)) {
        $('#rooms').append('<a href="room.html?id='+name+'">'+name+'</a><br>');
        rooms.push(name);
      }
    });
  });
</script>
    
  </body>
</html>